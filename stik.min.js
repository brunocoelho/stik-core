// ==========================================================================
// Project:   Stik.js - JavaScript Separation Of Concerns
// Copyright: Copyright 2011-2013 Lukas Alexandre
// License:   Licensed under MIT license
//            See https://github.com/lukelex/stik.js/blob/master/LICENSE
// ==========================================================================

// Version: 0.1.0 | From: 13-12-2013

window.stik||(window.stik={}),function(){function a(a,b,c,d){if(!a)throw"controller is missing";if(!b)throw"action is missing";if(!c)throw"template is missing";if(!d)throw"execution unit is missing";this.$$controller=a,this.$$action=b,this.$$template=c,this.$$executionUnit=d,this.$$disposable=!1}a.prototype.$load=function(){this.$$executionUnit(this,this.$$template)},stik.Context=a}(),window.stik||(window.stik={}),function(){function a(){this.$$contexts=[],this.$$executionUnits={}}a.prototype.$register=function(a,b,c){if(!c)throw"execution unit is missing";this.$storeExecutionUnit(a,b,c)},a.prototype.$storeExecutionUnit=function(a,b,c){this.$$executionUnits[a]||(this.$$executionUnits[a]={}),this.$$executionUnits[a][b]=c},a.prototype.$storeContext=function(a,b,c,d){return newContext=this.$createContext(a,b,c,d),this.$$contexts.push(newContext),newContext},a.prototype.$createContext=function(a,b,c,d){return new stik.Context(a,b,c,d)},a.prototype.$findTemplate=function(a,b,c){var d=document;c&&(d=c);var e="[data-controller="+a+"][data-action="+b+"]";return d.querySelectorAll(e)},a.prototype.$buildContexts=function(){var a,b,c;if(0===Object.keys(this.$$executionUnits).length)throw"no execution units available";for(a in this.$$executionUnits)for(b in this.$$executionUnits[a])c=this.$$executionUnits[a][b],this.$bindExecutionUnit(a,b,c)},a.prototype.$bindExecutionUnit=function(a,b,c){for(var d=this.$findTemplate(a,b),e=0;e<d.length;e++)this.$markAsBound(d[e]),this.$storeContext(a,b,d[e],c).$load()},a.prototype.$markAsBound=function(a){a.className+=" stik-bound"},stik.Manager=a}(),window.stik||(window.stik={}),function(){stik.$$manager=new stik.Manager,stik.register=function(a,b,c){stik.$$manager.$register(a,b,c)},stik.init=function(){this.$$manager.$buildContexts()}}();